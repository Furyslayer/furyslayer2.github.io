<body>
<h1><p class="countdown">Voting</p></h1>
<div class="inner-content">
<script charset="utf-8" type="text/javascript" src="https://static.polldaddy.com/p/16030629"></script>
</div>
</body>

<script>
// ----- Logger -----
function log(level, msg, error = null) {
    const time = new Date().toLocaleTimeString();
    const fullMsg = `[${time}] [${level}] ${msg}`;
    if (error) console.error(fullMsg, error);
    else console.log(fullMsg);
}

// ----- Voting Script -----
var radio, vote_btn;
var voteInterval, backInterval;
let lastActionTime = Date.now();

// Select elements
function select() {
    radio = document.getElementById('PDI_answer70537984');
    vote_btn = document.getElementById('pd-vote-button16030629');
    if (!radio) log('WARN', 'Radio button not found');
    if (!vote_btn) log('WARN', 'Vote button not found');
}

// CSP-safe click
function eventFire(el, etype) {
    if (!el) return;
    try {
        const event = new Event(etype, { bubbles: true, cancelable: true });
        el.dispatchEvent(event);
        log('INFO', `Event '${etype}' dispatched`);
    } catch (e) {
        log('ERROR', `Failed to fire event '${etype}'`, e);
    }
}

// Health monitor
setInterval(() => {
    const idleTime = ((Date.now() - lastActionTime) / 1000).toFixed(1);
    if (idleTime > 10) log('WARN', `No activity for ${idleTime} seconds`);
}, 5000);

// Voting loop
voteInterval = setInterval(() => {
    try {
        select();
        if (radio && vote_btn) {
            radio.click();
            eventFire(vote_btn, 'click');
            log('INFO', 'Vote submitted');
            lastActionTime = Date.now();
        } else log('WARN', 'Skipping vote: Elements missing');
    } catch (e) {
        log('ERROR', 'Vote interval crashed', e);
    }
}, 3000);

// Go back one page after 6 seconds
backInterval = setInterval(() => {
    try {
        log('INFO', 'Going back one page in history');
        history.back(); // WARNING: This will stop the script on the current page
    } catch (e) {
        log('ERROR', 'Back interval crashed', e);
    }
}, 6000);

</script>


