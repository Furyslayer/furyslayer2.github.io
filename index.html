<body>
<h1><p class="countdown">Voting</p></h1>
<div class="inner-content">
<script charset="utf-8" type="text/javascript" src="https://static.polldaddy.com/p/16030629"></script>
</div>
</body>

<script>
window.alert = function(msg) {
     console.log(msg);
}
try { var radio } catch (err) {}
try { var vote_btn } catch (err) {}
try { var back_btn } catch (err) {}

function select() {
    radio = document.getElementById('PDI_answer70537984')
    vote_btn = document.getElementById('pd-vote-button16030629')
    back_btn = document.querySelector('a.pds-return-poll')
	res_text = document.querySelector('div.pds-question-top');
}

function eventFire(el, etype){
  if (el.fireEvent) {
    el.fireEvent('on' + etype);
  } else {
    var evObj = document.createEvent('Events');
    evObj.initEvent(etype, true, false);
    evObj.which = el
    el.dispatchEvent(evObj);
  }
}

function sleep( sleepDuration ){
    var now = new Date().getTime();
    while(new Date().getTime() < now + sleepDuration){ /* do nothing */ } 
}

var votes = 24;
var time = -1;

setInterval(function() { 
    select()
    try { 
        radio.click()
        eventFire(vote_btn, 'click')
    } catch (e) {  }
}, 3000);

setInterval(function () {
    select();
	
	if(time == -1 && votes >= 24)
	{
		votes = 1;
		time = 60;
		return;
	}
	
	if(time > 0)
		return;
	
	if(time == -1 && res_text.textContent.indexOf("we have already counted your vote") != -1) {
		time = 120;
		return;
	}
	
	time = -1;
	try {
  back_btn.click();
} catch (e) {
  console.warn("Back button not found or couldn't be clicked.", e);
}
		
}, 1000, 500);

setInterval(function() {

  
    document.querySelector("p.countdown").innerHTML = "Voting";
	if (time > 0) {
		time--;
		document.querySelector("p.countdown").innerHTML = "Preparing to Vote: " + time;
	}
}, 1000);

setInterval(function () {window.location.reload()}, 10*60000);
</script>


